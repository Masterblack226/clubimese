{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portail des Membres - Club IMESE | Université Thomas Sankara</title>
    <meta name="description" content="Rejoignez la communauté Club IMESE - Inscription, connexion et gestion d'abonnement VIP pour l'excellence académique" />
    <link rel="stylesheet" href="{% static 'css/main.css' %}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
</head>
<body class="bg-background">
    <!-- Navigation Header -->
    <nav class="bg-white shadow-academic sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <img src="{% static 'images/IMESE.png' %}" alt="Club IMESE Logo" class="w-16 h-20 rounded-full mr-10"/>
                    </div>
                    <div class="ml-3">
                        <h1 class="text-xl font-inter font-bold text-primary">Club IMESE</h1>
                        <p class="text-xs text-gray-500">Université Thomas Sankara</p>
                    </div>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="{% url 'homepage' %}" class="text-gray-700 hover:text-primary px-3 py-2 rounded-md text-sm transition-academic">Accueil</a>
                        <a href="{% url 'formations_catalog' %}" class="text-gray-700 hover:text-primary px-3 py-2 rounded-md text-sm transition-academic">Formations</a>
                        <a href="{% url 'ressources' %}" class="text-gray-700 hover:text-primary px-3 py-2 rounded-md text-sm transition-academic">Ressources</a>
                        <a href="{% url 'news_activities' %}" class="text-gray-700 hover:text-primary px-3 py-2 rounded-md text-sm transition-academic">Actualités</a>
                        <a href="{% url 'vip_membership' %}" class="text-secondary font-medium px-3 py-2 rounded-md text-sm hover:bg-secondary-50 transition-academic">VIP</a>
                        {% if not user.is_authenticated %}
                            <a href="{% url 'membership_portal' %}" class="text-primary font-medium px-3 py-2 rounded-md text-sm bg-primary-50">Se connecter</a>
                        {% else %}
                            <a href="{% url 'membership_portal' %}" class="text-primary font-medium px-3 py-2 rounded-md text-sm bg-primary-50">Mon compte</a>
                        {% endif %}
                    </div>
                </div>

                <!-- Mobile menu button -->
                <div class="md:hidden">
                    <button type="button" class="text-gray-700 hover:text-primary focus:outline-none focus:text-primary" id="mobile-menu-button">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Navigation Menu -->
        <div class="md:hidden hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white border-t border-gray-200">
                <a href="{% url 'homepage' %}" class="text-gray-700 hover:text-primary block px-3 py-2 rounded-md text-base transition-academic">Accueil</a>
                <a href="{% url 'formations_catalog' %}" class="text-gray-700 hover:text-primary block px-3 py-2 rounded-md text-base transition-academic">Formations</a>
                <a href="{% url 'ressources' %}" class="text-gray-700 hover:text-primary block px-3 py-2 rounded-md text-base transition-academic">Ressources</a>
                <a href="{% url 'news_activities' %}" class="text-gray-700 hover:text-primary block px-3 py-2 rounded-md text-base transition-academic">Actualités</a>
                <a href="{% url 'vip_membership' %}" class="text-secondary font-medium block px-3 py-2 rounded-md text-base hover:bg-secondary-50 transition-academic">VIP</a>
                {% if not user.is_authenticated %}
                    <a href="{% url 'membership_portal' %}" class="text-primary font-medium block px-3 py-2 rounded-md text-base bg-primary-50">Se connecter</a>
                {% else %}
                <a href="{% url 'membership_portal' %}" class="text-primary font-medium block px-3 py-2 rounded-md text-base bg-primary-50">Mon compte</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative bg-gradient-to-br from-primary-900 via-primary-800 to-accent-800 text-white py-16">
        <!-- Background Pattern -->
        <div class="absolute inset-0 opacity-10">
            <svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
                <defs>
                    <pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse">
                        <path d="M 10 0 L 0 0 0 10" fill="none" stroke="white" stroke-width="0.5"/>
                    </pattern>
                </defs>
                <rect width="100" height="100" fill="url(#grid)"/>
            </svg>
        </div>

        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <div class="inline-flex items-center bg-white/10 backdrop-blur-sm rounded-full px-4 py-2 mb-6">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-sm font-medium">Portail des Membres</span>
                </div>

                <h1 class="text-4xl lg:text-6xl font-inter font-bold mb-6 leading-tight">
                    Rejoignez Notre
                    <span class="text-gradient-primary bg-gradient-to-r from-secondary to-accent bg-clip-text text-transparent">
                        Communauté
                    </span>
                </h1>

                <p class="text-xl lg:text-2xl text-blue-100 mb-8 leading-relaxed max-w-3xl mx-auto">
                    Accédez à votre espace personnel, gérez votre abonnement VIP et suivez votre progression académique
                </p>

                <!-- Quick Stats -->
                <div class="grid grid-cols-3 gap-4 max-w-md mx-auto">
                    <div class="text-center">
                        <div class="text-2xl font-bold text-secondary">{{ member_count }}</div>
                        <div class="text-sm text-blue-200">Membres Actifs</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-accent">{{ vip_member_count }}</div>
                        <div class="text-sm text-blue-200">Membres VIP</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-secondary">{{ satisfaction_rate }}%</div>
                        <div class="text-sm text-blue-200">Satisfaction</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content - Formulaire unique -->
    <section class="py-16 bg-surface">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            
            {% if not user.is_authenticated %}
            <!-- Formulaire unique avec toggle -->
            <div class="max-w-md mx-auto">
                <div class="card">
                    <!-- Toggle buttons -->
                    <div class="flex border-b border-gray-200 mb-6">
                        <button id="login-toggle" 
                                class="flex-1 py-3 px-4 text-center font-inter font-semibold transition-academic {% if active_tab == 'login' %}text-primary border-b-2 border-primary{% else %}text-gray-500 hover:text-gray-700{% endif %}">
                            Se connecter
                        </button>
                        <button id="register-toggle" 
                                class="flex-1 py-3 px-4 text-center font-inter font-semibold transition-academic {% if active_tab == 'register' %}text-primary border-b-2 border-primary{% else %}text-gray-500 hover:text-gray-700{% endif %}">
                            S'inscrire
                        </button>
                    </div>

                    <!-- Messages Django -->
                    {% if messages %}
                    <div class="mb-4">
                        {% for message in messages %}
                        <div class="p-3 rounded-lg {% if message.tags == 'success' %}bg-success-100 text-success-700{% else %}bg-error-100 text-error-700{% endif %}">
                            {{ message }}
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    <!-- Login Form -->
                    <div id="login-form" class="{% if active_tab != 'login' %}hidden{% endif %}">
                        <div class="text-center mb-6">
                            <h2 class="text-2xl font-inter font-bold text-primary mb-2">Se connecter</h2>
                            <p class="text-gray-600">Accédez à votre espace membre</p>
                        </div>

                        <form method="post" class="space-y-6">
                            {% csrf_token %}
                            <input type="hidden" name="connexion" value="1">
                            
                            <div>
                                <label for="login-email" class="block text-sm font-medium text-gray-700 mb-2">
                                    Adresse Email Universitaire
                                </label>
                                <input type="email" id="login-email" name="email" class="input-field" placeholder="votre.nom@uts.bf" required 
                                       value="{{ form_connexion.email.value|default:'' }}" />
                                {% if form_connexion.email.errors %}
                                <div class="text-error text-sm mt-1">{{ form_connexion.email.errors }}</div>
                                {% endif %}
                            </div>

                            <div>
                                <label for="login-password" class="block text-sm font-medium text-gray-700 mb-2">
                                    Mot de Passe
                                </label>
                                <div class="relative">
                                    <input type="password" id="login-password" name="password" class="input-field pr-10" placeholder="••••••••" required />
                                    <button type="button" class="absolute inset-y-0 right-0 pr-3 flex items-center" id="toggle-password">
                                        <svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                        </svg>
                                    </button>
                                </div>
                                {% if form_connexion.password.errors %}
                                <div class="text-error text-sm mt-1">{{ form_connexion.password.errors }}</div>
                                {% endif %}
                            </div>

                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <input id="remember-me" name="remember_me" type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded" />
                                    <label for="remember-me" class="ml-2 block text-sm text-gray-700">
                                        Se souvenir de moi
                                    </label>
                                </div>

                                <div class="text-sm">
                                    <a href="javascript:void(0)" class="font-medium text-primary hover:text-primary-700 transition-academic" id="forgot-password">
                                        Mot de passe oublié?
                                    </a>
                                </div>
                            </div>

                            <button type="submit" class="btn-primary w-full">
                                Se Connecter
                            </button>
                            
                            <div class="text-center text-sm text-gray-600">
                                Pas encore de compte? 
                                <button type="button" id="switch-to-register" class="text-primary font-medium hover:text-primary-700">
                                    S'inscrire
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Register Form -->
                    <div id="register-form" class="{% if active_tab != 'register' %}hidden{% endif %}">
                        <div class="text-center mb-6">
                            <h2 class="text-2xl font-inter font-bold text-primary mb-2">Inscription</h2>
                            <p class="text-gray-600">Créez votre compte membre Club IMESE</p>
                        </div>

                        <form method="post" class="space-y-6">
                            {% csrf_token %}
                            <input type="hidden" name="inscription" value="1">
                            
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label for="first-name" class="block text-sm font-medium text-gray-700 mb-2">
                                        Prénom
                                    </label>
                                    <input type="text" id="first-name" name="first_name" class="input-field" placeholder="Amadou" required 
                                           value="{{ form_inscription.first_name.value|default:'' }}" />
                                    {% if form_inscription.first_name.errors %}
                                    <div class="text-error text-sm mt-1">{{ form_inscription.first_name.errors }}</div>
                                    {% endif %}
                                </div>

                                <div>
                                    <label for="last-name" class="block text-sm font-medium text-gray-700 mb-2">
                                        Nom de Famille
                                    </label>
                                    <input type="text" id="last-name" name="last_name" class="input-field" placeholder="Traoré" required 
                                           value="{{ form_inscription.last_name.value|default:'' }}" />
                                    {% if form_inscription.last_name.errors %}
                                    <div class="text-error text-sm mt-1">{{ form_inscription.last_name.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>

                            <div>
                                <label for="register-email" class="block text-sm font-medium text-gray-700 mb-2">
                                    Adresse Email
                                </label>
                                <input type="email" id="register-email" name="email" class="input-field" placeholder="amadou.traore@uts.bf" required 
                                       value="{{ form_inscription.email.value|default:'' }}" />
                                <p class="mt-1 text-sm text-gray-500">Utilisez votre adresse email officielle</p>
                                {% if form_inscription.email.errors %}
                                <div class="text-error text-sm mt-1">{{ form_inscription.email.errors }}</div>
                                {% endif %}
                            </div>

                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label for="student-id" class="block text-sm font-medium text-gray-700 mb-2">
                                        Numéro Étudiant (INE)
                                    </label>
                                    <input type="text" id="student-id" name="numero_etudiant" class="input-field" placeholder="N0002024001" required 
                                           value="{{ form_inscription.numero_etudiant.value|default:'' }}" />
                                    {% if form_inscription.numero_etudiant.errors %}
                                    <div class="text-error text-sm mt-1">{{ form_inscription.numero_etudiant.errors }}</div>
                                    {% endif %}
                                </div>

                                <div>
                                    <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
                                        Téléphone
                                    </label>
                                    <input type="tel" id="phone" name="telephone" class="input-field" placeholder="+226 70 12 34 56" required 
                                           value="{{ form_inscription.telephone.value|default:'' }}" />
                                    {% if form_inscription.telephone.errors %}
                                    <div class="text-error text-sm mt-1">{{ form_inscription.telephone.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>

                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label for="academic-level" class="block text-sm font-medium text-gray-700 mb-2">
                                        Niveau Académique
                                    </label>
                                    <select id="academic-level" name="niveau_academique" class="input-field" required>
                                        <option value>Sélectionnez votre niveau</option>
                                        <option value="licence1" {% if form_inscription.niveau_academique.value == "licence1" %}selected{% endif %}>Licence 1</option>
                                        <option value="licence2" {% if form_inscription.niveau_academique.value == "licence2" %}selected{% endif %}>Licence 2</option>
                                        <option value="licence3" {% if form_inscription.niveau_academique.value == "licence3" %}selected{% endif %}>Licence 3</option>
                                        <option value="master1" {% if form_inscription.niveau_academique.value == "master1" %}selected{% endif %}>Master 1</option>
                                        <option value="master2" {% if form_inscription.niveau_academique.value == "master2" %}selected{% endif %}>Master 2</option>
                                        <option value="doctorat" {% if form_inscription.niveau_academique.value == "doctorat" %}selected{% endif %}>Doctorat</option>
                                    </select>
                                    {% if form_inscription.niveau_academique.errors %}
                                    <div class="text-error text-sm mt-1">{{ form_inscription.niveau_academique.errors }}</div>
                                    {% endif %}
                                </div>

                                <div>
                                    <label for="specialization" class="block text-sm font-medium text-gray-700 mb-2">
                                        Spécialisation
                                    </label>
                                    <select id="specialization" name="specialisation" class="input-field" required>
                                        <option value>Choisissez votre spécialisation</option>
                                        <option value="statistics" {% if form_inscription.specialisation.value == "statistics" %}selected{% endif %}>Statistiques</option>
                                        <option value="economics" {% if form_inscription.specialisation.value == "economics" %}selected{% endif %}>Économie</option>
                                        <option value="econometrics" {% if form_inscription.specialisation.value == "econometrics" %}selected{% endif %}>Économétrie</option>
                                        <option value="data-science" {% if form_inscription.specialisation.value == "data-science" %}selected{% endif %}>Science des Données</option>
                                        <option value="applied-economics" {% if form_inscription.specialisation.value == "applied-economics" %}selected{% endif %}>Économie Appliquée</option>
                                        <option value="financial-economics" {% if form_inscription.specialisation.value == "financial-economics" %}selected{% endif %}>Économie Financière</option>
                                        <option value="mathematiques" {% if form_inscription.specialisation.value == "mathematiques" %}selected{% endif %}>Mathématiques</option>
                                    </select>
                                    {% if form_inscription.specialisation.errors %}
                                    <div class="text-error text-sm mt-1">{{ form_inscription.specialisation.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>

                            <div>
                                <label for="register-password" class="block text-sm font-medium text-gray-700 mb-2">
                                    Mot de Passe
                                </label>
                                <input type="password" id="register-password" name="password1" class="input-field" placeholder="••••••••" required />
                                {% if form_inscription.password1.errors %}
                                <div class="text-error text-sm mt-1">{{ form_inscription.password1.errors }}</div>
                                {% endif %}
                                <div class="mt-2">
                                    <div class="flex items-center space-x-2 text-xs">
                                        <div class="password-strength-indicator">
                                            <div class="password-strength-bar" id="password-strength"></div>
                                        </div>
                                        <span id="password-strength-text" class="text-gray-500">Saisissez un mot de passe</span>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <label for="confirm-password" class="block text-sm font-medium text-gray-700 mb-2">
                                    Confirmer le Mot de Passe
                                </label>
                                <input type="password" id="confirm-password" name="password2" class="input-field" placeholder="••••••••" required />
                                {% if form_inscription.password2.errors %}
                                <div class="text-error text-sm mt-1">{{ form_inscription.password2.errors }}</div>
                                {% endif %}
                            </div>

                            <div class="space-y-4">
                                <div class="flex items-start">
                                    <input id="terms" name="terms" type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded mt-1" required />
                                    <label for="terms" class="ml-2 block text-sm text-gray-700">
                                        J'accepte les <a href="javascript:void(0)" class="text-primary hover:text-primary-700 transition-academic">conditions d'utilisation</a> 
                                        et la <a href="javascript:void(0)" class="text-primary hover:text-primary-700 transition-academic">politique de confidentialité</a>
                                    </label>
                                </div>

                                <div class="flex items-start">
                                    <input id="newsletter" name="newsletter_acceptee" type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded mt-1" 
                                           {% if form_inscription.newsletter_acceptee.value %}checked{% endif %} />
                                    <label for="newsletter" class="ml-2 block text-sm text-gray-700">
                                        Je souhaite recevoir les actualités et formations par email
                                    </label>
                                </div>
                            </div>

                            <button type="submit" class="btn-primary w-full">
                                Créer Mon Compte
                            </button>
                            
                            <div class="text-center text-sm text-gray-600">
                                Déjà un compte? 
                                <button type="button" id="switch-to-login" class="text-primary font-medium hover:text-primary-700">
                                    Se connecter
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            {% else %}

            <!-- Dashboard pour les utilisateurs connectés -->
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                {% if not user.is_superuser %}
                <!-- Section profil simplifiée -->
<div class="card mb-8">
    <div class="p-6">
        <!-- En-tête avec photo et informations -->
        <div class="flex flex-col sm:flex-row items-start sm:items-center gap-6 mb-6">
            <!-- Photo de profil -->
            <div class="flex-shrink-0">
                <div class="relative">
                    {% if profil.photo %}
                        <img src="{{ profil.photo.url }}" 
                            alt="Photo de profil de {{ user.first_name }}" 
                            class="w-10 h-10 rounded-full object-cover border-4 border-white shadow-lg" />
                    {% else %}
                        <div class="w-24 h-24 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center border-4 border-white shadow-lg">
                            <svg class="w-10 h-10 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Informations utilisateur -->
            <div class="flex-1">
                <div class="flex items-center space-x-2 mb-2">
                    <h1 class="text-2xl md:text-3xl font-bold text-gray-800">Bonjour, {{ user.first_name }}!</h1>
                    {% if profil.est_vip %}
                        <span class="bg-gradient-to-r from-secondary to-accent text-white text-xs px-3 py-1 rounded-full font-semibold animate-pulse">VIP</span>
                    {% endif %}
                </div>
                <p class="text-gray-600 mb-3">
                    {{ profil.get_specialisation_display }} • {{ profil.get_niveau_academique_display|title }}
                </p>
                <div class="flex flex-wrap items-center gap-4 text-sm text-gray-500">
                    <span class="flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        Dernière connexion: {{ user.last_login|date:"d M Y, H:i" }}
                    </span>
                    {% if profil.numero_etudiant %}
                    <span class="flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                        {{ profil.numero_etudiant }}
                    </span>
                    {% endif %}
                    <div class="flex flex-wrap gap-3">
                        {% if not profil.est_vip %}
                        <a href="{% url 'vip_membership' %}" class="bg-gradient-to-r from-secondary to-accent text-white px-4 py-2 rounded-lg font-medium hover:from-secondary-600 hover:to-accent-600 transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 text-sm">
                            <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732L14.146 12.8l-1.179 4.456a1 1 0 01-1.934 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732L9.854 7.2l1.179-4.456A1 1 0 0112 2z" clip-rule="evenodd"/>
                            </svg>
                            Passer VIP
                        </a>
                        {% endif %}
                        <a href="{% url 'deconnexion' %}" class="bg-white text-gray-700 px-4 py-2 rounded-lg font-medium border border-gray-200 hover:bg-gray-50 transition-all duration-300 flex items-center text-sm">
                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                            </svg>
                            Déconnexion
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

        <!-- Section unique de gestion de photo -->
        <div class="border-t border-gray-200 pt-6">
            <form method="post" enctype="multipart/form-data" class="space-y-4">
                {% csrf_token %}
                
                <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                    {% if not profil.photo %}
                    <div>
                        <h3 class="text-lg font-bold text-gray-800">Photo de Profil</h3>
                        <p class="text-gray-600 text-sm mt-1">
                            Personnalisez votre compte avec une photo
                        </p>
                    </div>
                    {% endif %}
                    
                    <div class="flex flex-wrap gap-3">
                        <!-- Input file caché -->
                        <input type="file" name="photo_profil" accept="image/*" 
                               class="hidden" id="photo-upload-input" />
                        
                        <!-- Bouton pour uploader -->
                        <label for="photo-upload-input" class="bg-primary text-white px-4 py-2 rounded-lg font-medium hover:bg-primary-600 cursor-pointer transition-colors duration-200 flex items-center text-sm">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                            </svg>
                            {% if profil.photo %}Changer la photo{% else %}Ajouter une photo{% endif %}
                        </label>
                        
                        <!-- Bouton suppression (seulement si photo existe) -->
                        {% if profil.photo %}
                        <button type="submit" name="supprimer_photo" value="1" 
                                class="bg-red-50 text-red-600 px-4 py-2 rounded-lg font-medium hover:bg-red-100 transition-colors duration-200 flex items-center text-sm">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                            Supprimer
                        </button>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Informations format -->
                {% if not profil.photo %}
                <div class="p-3 bg-blue-50 rounded-lg">
                    <p class="text-sm text-blue-700">
                        <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        Formats: JPG, PNG, GIF • Taille max: 5MB • Carré recommandé
                    </p>
                </div>
                {% endif %}
            </form>
        </div>
    </div>
</div>

                <!-- Statistiques dynamiques avec animations -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <!-- Formations complétées -->
                    <div class="card bg-gradient-to-br from-primary-50 to-primary-100 border border-primary-200 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
                        <div class="p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-primary-700">Formations</p>
                                    <p class="text-3xl font-bold text-primary-900 mt-1" id="formations-count">{{ stats.formations_completees }}</p>
                                    <p class="text-xs text-primary-600 mt-1">complétées</p>
                                </div>
                                <div class="bg-primary-500 p-3 rounded-full">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="flex items-center text-xs text-primary-700">
                                    <span>+2 cette semaine</span>
                                    <svg class="w-3 h-3 ml-1 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Devoirs rendus -->
                    <div class="card bg-gradient-to-br from-secondary-50 to-secondary-100 border border-secondary-200 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
                        <div class="p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-secondary-700">Devoirs</p>
                                    <p class="text-3xl font-bold text-secondary-900 mt-1" id="devoirs-count">{{ stats.devoirs_rendus }}</p>
                                    <p class="text-xs text-secondary-600 mt-1">rendus</p>
                                </div>
                                <div class="bg-secondary-500 p-3 rounded-full">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="w-full bg-secondary-200 rounded-full h-2">
                                    <div class="bg-secondary-600 h-2 rounded-full" style="width: 85%"></div>
                                </div>
                                <div class="flex justify-between text-xs text-secondary-700 mt-1">
                                    <span>85% de rendu</span>
                                    <span>30/35</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Moyenne générale -->
                    <div class="card bg-gradient-to-br from-accent-50 to-accent-100 border border-accent-200 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
                        <div class="p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-accent-700">Moyenne</p>
                                    <p class="text-3xl font-bold text-accent-900 mt-1" id="moyenne-count">{{ stats.moyenne_generale }}</p>
                                    <p class="text-xs text-accent-600 mt-1">générale</p>
                                </div>
                                <div class="bg-accent-500 p-3 rounded-full">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="flex items-center text-xs text-accent-700">
                                    <span class="flex items-center">
                                        <svg class="w-3 h-3 mr-1 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>
                                        </svg>
                                        +2.5 points
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Points XP -->
                    <div class="card bg-gradient-to-br from-success-50 to-success-100 border border-success-200 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
                        <div class="p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-success-700">Points XP</p>
                                    <p class="text-3xl font-bold text-success-900 mt-1" id="xp-count">{{ stats.points_xp }}</p>
                                    <p class="text-xs text-success-600 mt-1">gagnés</p>
                                </div>
                                <div class="bg-success-500 p-3 rounded-full">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="w-full bg-success-200 rounded-full h-2">
                                    <div class="bg-success-600 h-2 rounded-full" style="width: 78%"></div>
                                </div>
                                <div class="flex justify-between text-xs text-success-700 mt-1">
                                    <span>{{ stats.niveau }}</span>
                                    <span>{{ stats.points_xp }}/200</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Progression et activités récentes -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Activités récentes et Événements à venir -->
                    <div class="lg:col-span-2">
                        <div class="card">
                            <!-- En-tête avec tabs -->
                            <div class="p-6 border-b border-gray-200">
                                <div class="flex items-center justify-between">
                                    <div class="flex space-x-4">
                                        <button class="tab-button active font-semibold text-primary border-b-2 border-primary pb-2 px-1" data-tab="activites">
                                            Activités Récentes
                                        </button>
                                        <button class="tab-button font-medium text-gray-500 hover:text-gray-700 pb-2 px-1" data-tab="evenements">
                                            Événements à venir
                                        </button>
                                    </div>
                                    <div class="flex space-x-2">
                                        <a href="{% url 'ressources' %}" class="text-primary hover:text-primary-700 text-sm font-medium transition-colors duration-200 activites-link">
                                            Voir tout
                                        </a>
                                        <a href="{% url 'news_activities' %}" class="text-primary hover:text-primary-700 text-sm font-medium transition-colors duration-200 evenements-link hidden">
                                            Voir tout
                                        </a>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Contenu des activités -->
                            <div class="tab-content active p-6" id="activites-content">
                                {% if activites_recentes %}
                                    <div class="space-y-4">
                                        {% for activite in activites_recentes %}
                                        <div class="flex items-start space-x-4 p-4 rounded-lg {% if not activite.est_lue %}bg-blue-50 border border-blue-100{% else %}hover:bg-gray-50{% endif %} transition-colors duration-200">
                                            <div class="bg-{{ activite.get_icon_bg_class }} w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                                                {{ activite.get_icon_svg|safe }}
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <h4 class="font-semibold text-gray-800 truncate">{{ activite.titre }}</h4>
                                                <p class="text-sm text-gray-600 mt-1">{{ activite.description }}</p>
                                                <div class="flex items-center justify-between mt-2">
                                                    <p class="text-xs text-gray-500">{{ activite.get_temps_ecoule }}</p>
                                                    {% if not activite.est_lue %}
                                                    <span class="bg-red-500 w-2 h-2 rounded-full flex-shrink-0"></span>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    <div class="text-center py-12">
                                        <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                            <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                            </svg>
                                        </div>
                                        <p class="text-gray-500 font-medium">Aucune activité récente</p>
                                        <p class="text-sm text-gray-400 mt-1">Vos activités apparaîtront ici</p>
                                    </div>
                                {% endif %}
                            </div>
                            
                            <!-- Contenu des événements -->
                            <div class="tab-content p-6 hidden" id="evenements-content">
                                {% if evenements %}
                                    <div class="space-y-4">
                                        {% for evenement in evenements %}
                                        <div class="flex items-start space-x-4 p-4 rounded-lg hover:bg-gray-50 transition-colors duration-200 border border-gray-100">
                                            <div class="bg-primary w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                                                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                                </svg>
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <h4 class="font-semibold text-gray-800">{{ evenement.titre }}</h4>
                                                <p class="text-sm text-gray-600 mt-1">{{ evenement.description|truncatewords:15 }}</p>
                                                <div class="flex items-center justify-between mt-2">
                                                    <div class="text-xs text-gray-500">
                                                        <span class="flex items-center">
                                                            <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                                            </svg>
                                                            {{ evenement.date_debut|date:"d F Y à H:i" }}
                                                        </span>
                                                    </div>
                                                    {% if evenement.formateur %}
                                                    <span class="text-xs bg-primary-100 text-primary-800 px-2 py-1 rounded">
                                                        {{ evenement.formateur.nom }}
                                                    </span>
                                                    {% endif %}
                                                </div>
                                                <div class="flex items-center text-xs text-gray-500 mt-1">
                                                    <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                                    </svg>
                                                    {{ evenement.lieu }}
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    <div class="text-center py-12">
                                        <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                            <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                            </svg>
                                        </div>
                                        <p class="text-gray-500 font-medium">Aucun événement prévu</p>
                                        <p class="text-sm text-gray-400 mt-1">Les événements à venir seront affichés ici</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <!-- Progression et quick actions -->
                    <div class="space-y-6">
                        <!-- Progression circulaire -->
                        <div class="card">
                            <div class="p-6">
                                <h3 class="text-lg font-bold text-gray-800 mb-4">Votre Progression</h3>
                                <div class="flex justify-center mb-4">
                                    <div class="relative w-32 h-32">
                                        <svg class="w-32 h-32 transform -rotate-90" viewBox="0 0 100 100">
                                            <circle cx="50" cy="50" r="45" fill="none" stroke="#e5e7eb" stroke-width="8"/>
                                            <circle cx="50" cy="50" r="45" fill="none" stroke="url(#gradient)" stroke-width="8" 
                                                    stroke-dasharray="283" stroke-dashoffset="70" 
                                                    class="transition-all duration-1000 ease-out"/>
                                            <defs>
                                                <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                                    <stop offset="0%" stop-color="#3B82F6"/>
                                                    <stop offset="100%" stop-color="#8B5CF6"/>
                                                </linearGradient>
                                            </defs>
                                        </svg>
                                        <div class="absolute inset-0 flex items-center justify-center">
                                            <span class="text-2xl font-bold text-gray-800">{{ progress_percentage }}%</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="text-center">
                                    <p class="text-sm text-gray-600">Objectif mensuel</p>
                                    <p class="text-xs text-gray-500 mt-1">156/200 points</p>
                                </div>
                            </div>
                        </div>

                        <!-- Actions rapides -->
                        <div class="card">
                            <div class="p-6">
                                <h3 class="text-lg font-bold text-gray-800 mb-4">Actions Rapides</h3>
                                
                                <div class="space-y-3">
                                    <a href="{% url 'formations_catalog' %}" class="flex items-center p-3 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors duration-200 group">
                                        <div class="bg-primary-500 p-2 rounded-lg mr-3 group-hover:bg-primary-600 transition-colors duration-200">
                                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                                            </svg>
                                        </div>
                                        <span class="font-medium text-gray-800 group-hover:text-primary-700">Parcourir les Formations</span>
                                    </a>

                                    <a href="{% url 'ressources' %}" class="flex items-center p-3 bg-accent-50 rounded-lg hover:bg-accent-100 transition-colors duration-200 group">
                                        <div class="bg-accent-500 p-2 rounded-lg mr-3 group-hover:bg-accent-600 transition-colors duration-200">
                                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                            </svg>
                                        </div>
                                        <span class="font-medium text-gray-800 group-hover:text-accent-700">Mes Devoirs</span>
                                    </a>

                                    {% if not profil.est_vip %}
                                    <a href="{% url 'vip_membership' %}" class="flex items-center p-3 bg-secondary-50 rounded-lg hover:bg-secondary-100 transition-colors duration-200 group">
                                        <div class="bg-secondary-500 p-2 rounded-lg mr-3 group-hover:bg-secondary-600 transition-colors duration-200">
                                            <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732L14.146 12.8l-1.179 4.456a1 1 0 01-1.934 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732L9.854 7.2l1.179-4.456A1 1 0 0112 2z" clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                        <span class="font-medium text-gray-800 group-hover:text-secondary-700">Devenir Membre VIP</span>
                                    </a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                {% else %}
                <!-- Dashboard pour superadmin -->
                <div class="bg-gradient-to-r from-purple-50 to-indigo-50 rounded-2xl p-8 mb-8">
                    <div class="text-center">
                        <div class="w-24 h-24 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6">
                            <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                            </svg>
                        </div>
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">Interface Administrateur</h1>
                        <p class="text-gray-600 mb-6">Bienvenue dans le panneau de contrôle administrateur</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto">
                            <a href="{% url 'admin:index' %}" class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border border-gray-100">
                                <div class="bg-blue-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-4">
                                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    </svg>
                                </div>
                                <h3 class="font-semibold text-gray-800 mb-2">Administration Django</h3>
                                <p class="text-sm text-gray-600">Gestion complète du site</p>
                            </a>
                            
                            <a href="{% url 'news_activities' %}" class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border border-gray-100">
                                <div class="bg-green-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-4">
                                    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                    </svg>
                                </div>
                                <h3 class="font-semibold text-gray-800 mb-2">Événements</h3>
                                <p class="text-sm text-gray-600">Gérer les événements et actualités</p>
                            </a>
                            
                            <a href="{% url 'formations_catalog' %}" class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border border-gray-100">
                                <div class="bg-purple-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-4">
                                    <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                                    </svg>
                                </div>
                                <h3 class="font-semibold text-gray-800 mb-2">Formations</h3>
                                <p class="text-sm text-gray-600">Gérer les formations et ressources</p>
                            </a>
                        </div>

                        <div class="mt-8 flex justify-center">
                            <a href="{% url 'deconnexion' %}" class="bg-white text-gray-700 px-6 py-3 rounded-lg font-medium border border-gray-200 hover:bg-gray-50 transition-all duration-300 flex items-center">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                                </svg>
                                Déconnexion
                            </a>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid lg:grid-cols-4 gap-8">
                <!-- Club Info -->
                <div class="lg:col-span-2">
                    <div class="flex items-center mb-4">
                        <div class="flex-shrink-1">
                            <img src="{% static 'images/IMESE.png' %}" alt="Club IMESE Logo" class="w-10 h-20 rounded-full mr-10"/>
                        </div>
                        <div>
                            <h3 class="text-xl font-inter font-bold">Club IMESE</h3>
                            <p class="text-sm text-gray-400">Université Thomas Sankara</p>
                        </div>
                    </div>
                    <p class="text-gray-300 mb-4 max-w-md">
                        L'excellence par la collaboration - Votre partenaire pour l'excellence académique en Statistiques et Économie au Burkina Faso.
                    </p>
                    <div class="flex space-x-4">
                        <a href="https://web.facebook.com/Lejeunestatisticien" class="text-gray-400 hover:text-secondary transition-academic">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                        </a>
                        <a href="https://www.tiktok.com/@club_imese?is_from_webapp=1&sender_device=pc" class="text-gray-400 hover:text-secondary transition-academic">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19.589 6.686a4.793 4.793 0 0 1-3.77-4.245V2h-3.445v13.672a2.896 2.896 0 0 1-5.201 1.743l-.002-.001.002.001a2.895 2.895 0 0 1 3.183-4.51v-3.5a6.329 6.329 0 0 0-5.394 10.692 6.33 6.33 0 0 0 10.857-4.424V8.687a8.182 8.182 0 0 0 4.773 1.526V6.79a4.831 4.831 0 0 1-1.003-.104z"/>
                            </svg>
                        </a>
                        <a href="javascript:void(0)" class="text-gray-400 hover:text-secondary transition-academic">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div>
                    <h4 class="text-lg font-inter font-semibold mb-4">Liens Rapides</h4>
                    <ul class="space-y-2">
                        <li><a href="{% url 'homepage' %}" class="text-gray-300 hover:text-secondary transition-academic">Accueil</a></li>
                        <li><a href="{% url 'formations_catalog' %}" class="text-gray-300 hover:text-secondary transition-academic">Formations</a></li>
                        <li><a href="{% url 'ressources' %}" class="text-gray-300 hover:text-secondary transition-academic">Ressources</a></li>
                        <li><a href="{% url 'news_activities' %}" class="text-gray-300 hover:text-secondary transition-academic">Actualités</a></li>
                        <li><a href="{% url 'vip_membership' %}" class="text-gray-300 hover:text-secondary transition-academic">VIP</a></li>
                        {% if not user.is_authenticated %}
                        <li><a href="{% url 'membership_portal' %}" class="text-gray-300 hover:text-secondary transition-academic">Inscription</a></li>
                        {% else %}
                        <li><a href="{% url 'membership_portal' %}" class="text-gray-300 hover:text-secondary transition-academic">Mon Compte</a></li>
                        {% endif %}
                    </ul>
                </div>

                <!-- Contact Info -->
                <div>
                    <h4 class="text-lg font-inter font-semibold mb-4">Contact</h4>
                    <div class="space-y-2 text-gray-300">
                        <p class="flex items-center">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                            </svg>
                            Université Thomas Sankara, Ouagadougou
                        </p>
                        <p class="flex items-center">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                            </svg>
                            contact@clubimese.bf
                        </p>
                        <p class="flex items-center">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                            </svg>
                            +226 72 68 95 58
                        </p>
                    </div>
                </div>
            </div>

            <div class="border-t border-gray-800 mt-8 pt-8 text-center">
                <p class="text-gray-400">
                    © 2025 Club IMESE - Université Thomas Sankara. Tous droits réservés.
                </p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Mobile menu toggle
        document.getElementById('mobile-menu-button').addEventListener('click', function() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        });


        // Upload automatique de la photo
        document.addEventListener('DOMContentLoaded', function() {
            const photoInput = document.getElementById('photo-upload-input');
            if (photoInput) {
                photoInput.addEventListener('change', function() {
            if (this.files && this.files[0]) {
                // Soumettre le formulaire automatiquement
                this.form.submit();
            }
            });
            }
    
    // Confirmation pour la suppression
    const deleteBtn = document.querySelector('button[name="supprimer_photo"]');
    if (deleteBtn) {
        deleteBtn.addEventListener('click', function(e) {
            if (!confirm('Êtes-vous sûr de vouloir supprimer votre photo de profil ?')) {
                e.preventDefault();
            }
        });
    }
});


        // Toggle entre connexion et inscription
        document.addEventListener('DOMContentLoaded', function() {
            const loginToggle = document.getElementById('login-toggle');
            const registerToggle = document.getElementById('register-toggle');
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const switchToRegister = document.getElementById('switch-to-register');
            const switchToLogin = document.getElementById('switch-to-login');

            // Fonction pour switcher vers l'inscription
            function showRegister() {
                loginForm.classList.add('hidden');
                registerForm.classList.remove('hidden');
                loginToggle.classList.remove('text-primary', 'border-b-2', 'border-primary');
                loginToggle.classList.add('text-gray-500', 'hover:text-gray-700');
                registerToggle.classList.add('text-primary', 'border-b-2', 'border-primary');
                registerToggle.classList.remove('text-gray-500', 'hover:text-gray-700');
            }

            // Fonction pour switcher vers la connexion
            function showLogin() {
                registerForm.classList.add('hidden');
                loginForm.classList.remove('hidden');
                registerToggle.classList.remove('text-primary', 'border-b-2', 'border-primary');
                registerToggle.classList.add('text-gray-500', 'hover:text-gray-700');
                loginToggle.classList.add('text-primary', 'border-b-2', 'border-primary');
                loginToggle.classList.remove('text-gray-500', 'hover:text-gray-700');
            }

            // Event listeners
            if (switchToRegister) {
                switchToRegister.addEventListener('click', showRegister);
            }
            
            if (switchToLogin) {
                switchToLogin.addEventListener('click', showLogin);
            }
            
            if (loginToggle) {
                loginToggle.addEventListener('click', showLogin);
            }
            
            if (registerToggle) {
                registerToggle.addEventListener('click', showRegister);
            }

            // Password visibility toggle
            const togglePassword = document.getElementById('toggle-password');
            if (togglePassword) {
                togglePassword.addEventListener('click', function() {
                    const passwordInput = document.getElementById('login-password');
                    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                    passwordInput.setAttribute('type', type);
                    
                    // Toggle icon
                    this.innerHTML = type === 'password' 
                        ? '<svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>'
                        : '<svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"/></svg>';
                });
            }

            // Password strength indicator
            const passwordInput = document.getElementById('register-password');
            if (passwordInput) {
                const strengthBar = document.getElementById('password-strength');
                const strengthText = document.getElementById('password-strength-text');

                passwordInput.addEventListener('input', function() {
                    const password = this.value;
                    let strength = 0;
                    let text = '';
                    let color = '';

                    if (password.length >= 8) strength++;
                    if (/[a-z]/.test(password)) strength++;
                    if (/[A-Z]/.test(password)) strength++;
                    if (/[0-9]/.test(password)) strength++;
                    if (/[^A-Za-z0-9]/.test(password)) strength++;

                    switch (strength) {
                        case 0:
                        case 1:
                            text = 'Très faible';
                            color = 'bg-red-500';
                            break;
                        case 2:
                            text = 'Faible';
                            color = 'bg-orange-500';
                            break;
                        case 3:
                            text = 'Moyen';
                            color = 'bg-yellow-500';
                            break;
                        case 4:
                            text = 'Fort';
                            color = 'bg-green-500';
                            break;
                        case 5:
                            text = 'Très fort';
                            color = 'bg-green-600';
                            break;
                    }

                    strengthBar.className = `password-strength-bar ${color}`;
                    strengthBar.style.width = `${(strength / 5) * 100}%`;
                    strengthText.textContent = text;
                });
            }

            // Forgot password
            const forgotPassword = document.getElementById('forgot-password');
            if (forgotPassword) {
                forgotPassword.addEventListener('click', function(e) {
                    e.preventDefault();
                    const email = prompt('Entrez votre adresse email universitaire:');
                    if (email) {
                        alert('Un SMS avec les instructions de réinitialisation a été envoyé à votre numéro de téléphone associé.');
                    }
                });
            }

            // Gestion des tabs Activités/Événements
            const tabButtons = document.querySelectorAll('.tab-button[data-tab]');
            const tabContents = document.querySelectorAll('.tab-content');
            const activitesLink = document.querySelector('.activites-link');
            const evenementsLink = document.querySelector('.evenements-link');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab');
                    
                    // Mettre à jour les boutons
                    tabButtons.forEach(btn => {
                        btn.classList.remove('active', 'text-primary', 'border-b-2', 'border-primary', 'font-semibold');
                        btn.classList.add('text-gray-500', 'hover:text-gray-700', 'font-medium');
                    });
                    
                    button.classList.add('active', 'text-primary', 'border-b-2', 'border-primary', 'font-semibold');
                    button.classList.remove('text-gray-500', 'hover:text-gray-700', 'font-medium');
                    
                    // Afficher le contenu correspondant
                    if (tabId === 'activites') {
                        document.getElementById('activites-content').classList.remove('hidden');
                        document.getElementById('evenements-content').classList.add('hidden');
                        activitesLink.classList.remove('hidden');
                        evenementsLink.classList.add('hidden');
                    } else {
                        document.getElementById('activites-content').classList.add('hidden');
                        document.getElementById('evenements-content').classList.remove('hidden');
                        activitesLink.classList.add('hidden');
                        evenementsLink.classList.remove('hidden');
                    }
                });
            });
        });

        // Add CSS for password strength indicator
        const style = document.createElement('style');
        style.textContent = `
            .password-strength-indicator {
                width: 100px;
                height: 4px;
                background-color: #e2e8f0;
                border-radius: 2px;
                overflow: hidden;
            }
            
            .password-strength-bar {
                height: 100%;
                width: 0%;
                transition: width 0.3s ease, background-color 0.3s ease;
                border-radius: 2px;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>